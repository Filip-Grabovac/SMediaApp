!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("selectionDone",[],t):"object"==typeof exports?exports.selectionDone=t():e.selectionDone=t()}(this,(()=>(document.querySelector(".main-button.submit-selection").addEventListener("click",(e=>{!function(e){e.target.classList.remove("active"),document.querySelector(".blue-loader").classList.remove("hidden"),document.querySelector(".selected-cities__wrapper").innerHTML="";let t=0;const n=new Set;function o(e){let o;if(e instanceof L.Polygon||e instanceof L.Rectangle){const t=e.getLatLngs()[0],n=`${Math.min(...t.map((e=>e.lat)))},${Math.min(...t.map((e=>e.lng)))},${Math.max(...t.map((e=>e.lat)))},${Math.max(...t.map((e=>e.lng)))}`;o=`\n        [out:json];\n        (\n          node["place"~"city|town"](${n});\n          way["place"~"city|town"](${n});\n          relation["place"~"city|town"](${n});\n        );\n        out body;`}else if(e instanceof L.Circle){const t=e.getLatLng(),n=e.getRadius();o=`\n        [out:json];\n        (\n          node["place"~"city|town"](around:${n}, ${t.lat}, ${t.lng});\n          way["place"~"city|town"](around:${n}, ${t.lat}, ${t.lng});\n          relation["place"~"city|town"](around:${n}, ${t.lat}, ${t.lng});\n        );\n        out body;`}else{if(!(e instanceof L.GeoJSON))return void console.warn("Unsupported layer type. Only polygon, rectangle, circle, and geoJSON are supported.");{const t=e.getBounds(),n=`${t.getSouth()},${t.getWest()},${t.getNorth()},${t.getEast()}`;o=`\n        [out:json];\n        (\n          node["place"~"city|town"](${n});\n          way["place"~"city|town"](${n});\n          relation["place"~"city|town"](${n});\n        );\n        out body;`}}t++,function(e){fetch("https://overpass-api.de/api/interpreter",{method:"POST",body:e}).then((e=>e.json())).then((e=>{const t=e.elements.filter((e=>e.tags&&e.tags.name)),o=document.querySelector(".selected-cities__wrapper");t.length>0?t.forEach((e=>{const t=e.tags.name;if(!n.has(t)){n.add(t);const e=document.createElement("div");e.classList.add("selected-city");const c=document.createElement("div");c.classList.add("selected-city__text"),c.textContent=t;const a=document.createElement("input");a.type="checkbox",a.classList.add("selected-city__checkbox"),a.checked=!0,e.appendChild(c),e.appendChild(a),o.appendChild(e)}})):console.log("No cities found in this area.")})).catch((e=>{console.error("Error querying Overpass API:",e)})).finally((()=>{t--,0===t&&(document.querySelector(".blue-loader").classList.add("hidden"),toggleModal())}))}(o)}window.drawnItems.eachLayer(o),window.nonEditableItems.eachLayer(o)}(e)})),document.querySelector(".close-modal").addEventListener("click",(()=>{toggleModal()})),document.querySelector(".overlay.homepage").addEventListener("click",(()=>{toggleModal()})),{})));