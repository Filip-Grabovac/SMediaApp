!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("functions",[],t):"object"==typeof exports?exports.functions=t():e.functions=t()}(this,(()=>(()=>{const e=document.querySelectorAll(".tool-wrapper .map-manipulation__icon");function t(e){const t=document.querySelector(".town-dropdown__range"),s=document.querySelector(".town-radius__tooltip");t.value=e.radius,t.max=50,t.min=0,s.textContent=`${e.radius} mi`,o(t,s),t.style.display="block",t.oninput=function(){const a=parseInt(t.value),i=1609.34*a;e.circle.setRadius(i),e.radius=a,s.textContent=`${a} mi`,o(t,s),n()}}function o(e,t){const o=e.offsetWidth,n=t.offsetWidth,s=e.value/e.max*(o-20);t.style.left=s-n/2+33+"px"}function n(){const e=document.querySelector(".main-button.submit-selection"),t=Object.keys(window.drawnItems._layers).length,o=Object.keys(window.nonEditableItems._layers).length;t>0||o>0?e.classList.add("active"):e.classList.remove("active")}return window.colorRandomizer=function(){let e=["#CBE4F9","#CDF5F6","#EFF9DA","#F9EBDF","#F9D8D6","#D6CDEA"];return e[Math.floor(Math.random()*e.length)]},e.forEach((function(e){e.addEventListener("click",(function(){document.querySelectorAll(".tool-wrapper").forEach((function(e){e.classList.remove("active")})),this.closest(".tool-wrapper").classList.add("active")}))})),window.createDropdown=function(e,o,s,a,i,r="#0c0b0e"){o.innerHTML="";const c=s.value.trim();if(c.length>0){const d=new RegExp(`(${c})`,"gi");e.forEach((e=>{const l=document.createElement("div");l.className="dropdown-item",l.classList.add(i),e.name.split(d).forEach((e=>{const t=document.createElement("span");e.toLowerCase()===c.toLowerCase()?(t.style.color=r,t.textContent=e):t.textContent=e,l.appendChild(t)})),l.classList.contains("zip-dropdown__link")&&l.addEventListener("click",(()=>{!function(e){const t=e.name.match(/^\d+/)?.[0],o=localStorage.getItem("authToken");t?fetch(`https://xrux-avyn-v7a8.n7d.xano.io/api:4o1s7k_j/get_zip_geojson?zipCode=${t}`,{method:"GET",headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"}}).then((e=>{if(!e.ok)throw new Error("Network response was not ok: "+e.statusText);return e.json()})).then((e=>{if(e.response&&e.response.result&&e.response.result.features&&e.response.result.features.length>0){const t=e.response.result.features[0].geometry.coordinates[0].map((e=>[e[1],e[0]])),o=L.polygon(t,{color:"blue",fillColor:"#3388ff",fillOpacity:.3}).addTo(map);o.getElement().classList.add("custom-polygon__searched"),map.fitBounds(o.getBounds()),window.nonEditableItems.addLayer(o),n()}else console.error("No features found in the response data")})).catch((e=>{console.error("Error fetching ZIP code boundaries from Xano:",e)})):console.error("ZIP code not found in itemData name")}(e)})),l.addEventListener("click",(()=>{e.onSelect(),a&&document.querySelector(".town-radius__dropdown").classList.toggle("hidden");const n=window.drawnCities.find((t=>t.name===e.name));n&&t(n),s.value=e.name,o.style.display="none",s.value=""})),o.appendChild(l)}))}else e.forEach((e=>{const n=document.createElement("div");n.className="dropdown-item",a&&n.classList.add("selected-city"),n.textContent=e.name,n.addEventListener("click",(()=>{e.onSelect(),n.classList.contains("selected-city")&&document.querySelector(".town-radius__dropdown").classList.toggle("hidden");const a=window.drawnCities.find((t=>t.name===e.name));a&&t(a),s.value=e.name,o.style.display="none",s.value=""})),o.appendChild(n)}));o.style.display=e.length>0?"block":"none"},window.hideDropdownOnClick=function(e,t){document.addEventListener("click",(o=>{e.contains(o.target)||o.target===t||o.target.classList.contains("search-input__arrow")||(e.style.display="none")}))},window.disableTools=function(){map&&map.dragging&&(document.querySelectorAll(".tool-wrapper").forEach((e=>{e.classList.remove("active")})),map.dragging.enable(),map.boxZoom.disable(),map.doubleClickZoom.enable())},document.querySelector(".close-town__dropdown")&&document.querySelector(".close-town__dropdown").addEventListener("click",(function(){document.querySelector(".town-radius__dropdown").classList.add("hidden")})),window.removeLayer=function(e){window.drawnItems.hasLayer(e)&&window.drawnItems.removeLayer(e),window.nonEditableItems.hasLayer(e)&&window.nonEditableItems.removeLayer(e),window.map.removeLayer(e),window.drawnCities=window.drawnCities.filter((t=>t.circle!==e)),n()},window.debounce=function(e,t){let o;return function(...n){o&&clearTimeout(o),o=setTimeout((()=>{e.apply(this,n)}),t)}},window.updateButtonState=n,window.toggleModal=function(){const e=document.querySelector(".overlay.homepage"),t=document.querySelector(".selected-area__modal");"block"===e.style.display&&"block"===t.style.display?(e.style.opacity="0",t.style.opacity="0",setTimeout((()=>{e.style.display="none",t.style.display="none"}),300)):(e.style.display="block",t.style.display="block",setTimeout((()=>{e.style.opacity="1",t.style.opacity="1"}),10))},{}})()));