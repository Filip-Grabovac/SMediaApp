!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("newClientModal",[],t):"object"==typeof exports?exports.newClientModal=t():e.newClientModal=t()}(this,(()=>(()=>{const e=document.querySelector(".client-modal-form"),t=document.querySelector(".main-button.next-step"),o=document.querySelector(".new-address__btn");let n=1,a=1;const l=document.getElementById("upload-area"),r=document.getElementById("fileElem"),d=document.getElementById("preview");let c={full_name:"",company_name:"",email:"",website:"",phone_number:"",company_office_adr:[],client_img:"",population_f:0,avg_household_income_f:0,single_family_homes_f:0,avg_home_value_f:0,distance_from_hq_f:0};function m(e){if(d.innerHTML="",e.length>0&&(e[0].type.startsWith("image/")||"image/svg+xml"===e[0].type)){const t=new FileReader;t.onloadend=()=>{c.client_img=t.result;const e=document.createElement("img");e.src=c.client_img,d.appendChild(e)},t.readAsDataURL(e[0])}else alert("Please upload an image file (PNG, JPG, JPEG, or SVG).")}return t.addEventListener("click",(e=>{e.preventDefault(),1===a?(c.full_name=document.getElementById("full-name").value,c.company_name=document.getElementById("company").value,c.email=document.getElementById("email").value,c.website=document.getElementById("website").value,c.phone_number=document.getElementById("phone-number").value,c.company_office_adr=Array.from(document.querySelectorAll(".company-office-address")).map((e=>e.value)).filter(Boolean),a++):(a=null,function(){const e=localStorage.getItem("authToken"),t={full_name:c.full_name,company_name:c.company_name,email:c.email,website:c.website,phone_number:c.phone_number,population_factor:parseFloat(document.getElementById("population").value)||0,avg_household_income_factor:parseFloat(document.getElementById("avg-income").value)||0,single_family_homes_factor:parseFloat(document.getElementById("num-homes").value)||0,avg_home_value_factor:parseFloat(document.getElementById("avg-home-value").value)||0,distance_from_hq_factor:parseFloat(document.getElementById("distance-hq").value)||0,client_img:c.client_img||null};fetch("https://xrux-avyn-v7a8.n7d.xano.io/api:4o1s7k_j/clients",{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(t)}).then((e=>e.json())).then((e=>{location.reload()})).catch((e=>{console.error("Error adding client:",e)}))}()),function(){document.querySelectorAll(".modal-dropdown").forEach((e=>{e.querySelector(".modal-dropdown__text").classList.remove("active"),e.querySelector(".modal-dropdown__arrow").classList.remove("active")}));const e=document.querySelector(".modal-dropdown.factors");e&&(e.querySelector(".modal-dropdown__text").classList.add("active"),e.querySelector(".modal-dropdown__arrow").classList.add("active")),2===a&&(document.querySelector(".new-client__modal").scrollTop=0)}(),function(e){document.querySelector(".modal-form__wrapper.first-step").classList.add("hidden"),document.querySelector(".modal-form__wrapper.second-step").classList.remove("hidden"),e.target.classList.remove("second-step","active"),e.target.classList.add("add-client"),e.target.textContent="Add new Client"}(e)})),e.addEventListener("input",(function(){const o=Array.from(e.querySelectorAll(".form-input[required]")).every((e=>{return e.value&&("email"!==e.type||(t=e.value,/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)));var t}));t.classList.toggle("active",o)})),o.addEventListener("click",(t=>{t.preventDefault(),function(){n++;const t=e.querySelector(".form-input__wrapper:last-child").cloneNode(!0),o=t.querySelector("input");o.value="",o.placeholder=`Company Office Address ${n}`,o.id=`field-address-${n}`,o.name=`address-${n}`,o.removeAttribute("required");const a=t.querySelector(".red-star");a&&a.remove(),e.appendChild(t)}()})),document.querySelectorAll(".form-input__scnd").forEach((e=>{e.addEventListener("input",(()=>{!function(){const e=[document.getElementById("population"),document.getElementById("avg-income"),document.getElementById("num-homes"),document.getElementById("avg-home-value"),document.getElementById("distance-hq")].every((e=>{const t=parseFloat(e.value);return!isNaN(t)&&t>=0&&t<=1}));document.querySelector(".add-client").classList.toggle("active",e)}();const t=parseFloat(e.value);(isNaN(t)||t<0||t>1)&&(e.value="")}))})),l.addEventListener("dragover",(e=>{e.preventDefault(),l.classList.add("drag-over")})),l.addEventListener("dragleave",(()=>{l.classList.remove("drag-over")})),l.addEventListener("drop",(e=>{e.preventDefault(),l.classList.remove("drag-over"),m(e.dataTransfer.files)})),r.addEventListener("change",(e=>{m(e.target.files)})),{}})()));