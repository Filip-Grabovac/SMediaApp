!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("homepage",[],t):"object"==typeof exports?exports.homepage=t():e.homepage=t()}(this,(()=>(()=>{"use strict";class e{constructor(e){this.mapInstance=e,this.disableActiveTool=this.disableActiveTool.bind(this),this.createDropdown=this.createDropdown.bind(this),this.updateTooltipPosition=this.updateTooltipPosition.bind(this),this.deleteMode=null,this.editMode=!1,this.deleteElement=this.deleteElement.bind(this),this.drawElement=this.drawElement.bind(this),this.excludedBtn=document.querySelector(".option_button.exclude")}disableActiveTool(){this.mapInstance.activeTool&&(this.mapInstance.activeTool.disable(),this.mapInstance.activeTool=null),this.deleteMode&&(this.deleteMode.disable(),this.deleteMode=null),this.editMode&&(window.drawnItems.eachLayer((function(e){e.editing&&e.editing.disable()})),this.editMode=!1),document.querySelector(".town-radius__dropdown").classList.add("hidden")}deleteElement(){this.disableActiveTool(),this.deleteMode=new L.EditToolbar.Delete(window.map,{featureGroup:window.drawnItems}),this.deleteMode.enable(),window.drawnItems.eachLayer((e=>{e.on("click",(()=>{this.removeLayer(e)}))})),window.nonEditableItems.eachLayer((e=>{e.on("click",(()=>{this.removeLayer(e)}))}))}removeLayer(e){window.drawnItems.hasLayer(e)&&window.drawnItems.removeLayer(e),window.nonEditableItems.hasLayer(e)&&window.nonEditableItems.removeLayer(e),window.map.removeLayer(e),window.drawnCities=window.drawnCities.filter((t=>t.circle!==e)),this.mapInstance.updateButtonState()}drawElement(e,t){const n=e.layer;window.drawnItems.addLayer(n),this.mapInstance.updateButtonState(),"polygon"===e.layerType?L.DomUtil.addClass(n._path,"custom-polygon"):"rectangle"===e.layerType?L.DomUtil.addClass(n._path,"custom-rectangle"):"circle"===e.layerType&&L.DomUtil.addClass(n._path,"custom-circle"),this.excludedBtn.classList.contains("active")&&L.DomUtil.addClass(n._path,"excluded"),document.querySelectorAll(".tool-wrapper").forEach((function(e){e.classList.remove("active")})),t.fetchPlacesFromAllShapes()}edit(){this.editMode?(window.drawnItems.eachLayer((function(e){e.editing&&e.editing.disable()})),this.editMode=!1):(window.drawnItems.eachLayer((function(e){e.editing&&(e.editing.enable(),e.on("edit",(function(){this.mapInstance.updateButtonState()})))})),this.editMode=!0)}drawTownCircle(e){const t=e.lat,n=e.lon;window.map.setView([t,n],9);const o=L.circle([t,n],{color:"blue",fillColor:"#30f",fillOpacity:.3,radius:40233.5,editable:!1}).addTo(window.map);window.nonEditableItems.addLayer(o),this.mapInstance.updateButtonState();const a={circle:o,name:e.display_name,radius:25};window.drawnCities.push(a);const i=o.getElement();i&&(L.DomUtil.addClass(i,"custom-circle__searched"),this.excludedBtn.classList.contains("active")&&L.DomUtil.addClass(i,"excluded"))}drawState(e,t){const n=L.geoJSON(e,{style:{color:"blue",weight:2},onEachFeature:(e,t)=>{t instanceof L.Polygon&&t.on("add",(()=>{L.DomUtil.addClass(t._path,"custom-polygon__searched"),this.excludedBtn.classList.contains("active")&&L.DomUtil.addClass(t._path,"excluded")}))}}).addTo(window.map);window.nonEditableItems.addLayer(n),t.updateButtonState();const o=n.getBounds();window.map.fitBounds(o)}createDropdown(e,t,n,o,a,i="#0c0b0e"){t.innerHTML="";const s=n.value.trim();if(s.length>0){const l=new RegExp(`(${s})`,"gi");e.forEach((e=>{const d=document.createElement("div");d.className="dropdown-item",d.classList.add(a),e.name.split(l).forEach((e=>{const t=document.createElement("span");e.toLowerCase()===s.toLowerCase()?(t.style.color=i,t.textContent=e):t.textContent=e,d.appendChild(t)})),d.classList.contains("zip-dropdown__link")&&d.addEventListener("click",(()=>{this.zipDraw(e)})),d.addEventListener("click",(()=>{e.onSelect(),o&&document.querySelector(".town-radius__dropdown").classList.toggle("hidden");const a=window.drawnCities.find((t=>t.name===e.name));a&&this.setupRadiusAdjustment(a),n.value=e.name,t.style.display="none",n.value=""})),t.appendChild(d)}))}else e.forEach((e=>{const a=document.createElement("div");a.className="dropdown-item",o&&a.classList.add("selected-city"),a.textContent=e.name,a.addEventListener("click",(()=>{e.onSelect(),a.classList.contains("selected-city")&&document.querySelector(".town-radius__dropdown").classList.toggle("hidden");const o=window.drawnCities.find((t=>t.name===e.name));o&&this.setupRadiusAdjustment(o),n.value=e.name,t.style.display="none",n.value=""})),t.appendChild(a)}));t.style.display=e.length>0?"block":"none"}setupRadiusAdjustment(e){const t=document.querySelector(".town-dropdown__range"),n=document.querySelector(".town-radius__tooltip");t.value=e.radius,t.max=50,t.min=0,n.textContent=`${e.radius} mi`,this.updateTooltipPosition(t,n),t.style.display="block",t.oninput=()=>{const o=parseInt(t.value),a=1609.34*o;e.circle.setRadius(a),e.radius=o,n.textContent=`${o} mi`,this.updateTooltipPosition(t,n),this.mapInstance.updateButtonState()}}updateTooltipPosition(e,t){const n=e.offsetWidth,o=t.offsetWidth,a=e.value/e.max*(n-20);t.style.left=a-o/2+33+"px"}zipDraw(e){const t=e.name.match(/^\d+/)?.[0],n=localStorage.getItem("authToken");t?fetch(`https://xrux-avyn-v7a8.n7d.xano.io/api:4o1s7k_j/get_zip_geojson?zipCode=${t}`,{method:"GET",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}}).then((e=>{if(!e.ok)throw new Error("Network response was not ok: "+e.statusText);return e.json()})).then((e=>{if(e.response&&e.response.result&&e.response.result.features&&e.response.result.features.length>0){const t=e.response.result.features[0].geometry.coordinates[0].map((e=>[e[1],e[0]])),n=L.polygon(t,{color:"blue",fillColor:"#3388ff",fillOpacity:.3}).addTo(map);n.getElement().classList.add("custom-polygon__searched"),this.excludedBtn.classList.contains("active")&&n.getElement().classList.add("excluded"),map.fitBounds(n.getBounds()),window.nonEditableItems.addLayer(n)}else console.error("No features found in the response data")})).catch((e=>{console.error("Error fetching ZIP code boundaries from Xano:",e)})):console.error("ZIP code not found in itemData name")}debounce(e,t){let n;return function(...o){n&&clearTimeout(n),n=setTimeout((()=>{e.apply(this,o)}),t)}}}class t{constructor(){this.activeTool=null,this.updateButtonState=this.updateButtonState.bind(this),this.tool=new e(this)}loadMap(){window.map=L.map("map",{zoomControl:!1}).setView([37.8,-96],4),L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(window.map),window.drawnItems=new L.FeatureGroup,window.nonEditableItems=L.featureGroup().addTo(window.map),window.map.addLayer(window.drawnItems);const e=new L.Control.Draw({edit:!1,draw:{polygon:!1,rectangle:!1,circle:!1,marker:!1,polyline:!1,circlemarker:!1}});window.map.addControl(e)}loadGeojson(e){L.geoJSON(e,{onEachFeature:function(e,t){e.properties&&!1===e.properties.editable?window.nonEditableItems.addLayer(t):window.drawnItems.addLayer(t)}}).addTo(window.map)}drawMap(e,t){this.loadMap(),e&&0!==Object.keys(e).length&&this.loadGeojson(e),document.getElementById("zoom-in").addEventListener("click",(function(){window.map.zoomIn()})),document.getElementById("zoom-out").addEventListener("click",(function(){window.map.zoomOut()})),document.getElementById("polygon").addEventListener("click",function(){this.tool.disableActiveTool(),this.activeTool=new L.Draw.Polygon(window.map),this.activeTool.enable()}.bind(this)),document.getElementById("square").addEventListener("click",function(){this.tool.disableActiveTool(),this.activeTool=new L.Draw.Rectangle(window.map),this.activeTool.enable()}.bind(this)),document.getElementById("circle").addEventListener("click",function(){this.tool.disableActiveTool(),this.activeTool=new L.Draw.Circle(window.map),this.activeTool.enable()}.bind(this)),document.getElementById("trash").addEventListener("click",function(){this.tool.deleteElement()}.bind(this)),window.map.on(L.Draw.Event.CREATED,function(e){this.tool.drawElement(e,t)}.bind(this)),document.getElementById("edit").addEventListener("click",function(){this.tool.disableActiveTool(),this.tool.edit()}.bind(this))}fetchCitySuggestions(e,t,n){const o=`https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(`${e}, United States`)}&format=json&addressdetails=1&limit=10`;fetch(o).then((e=>{if(!e.ok)throw new Error("Network response was not ok");return e.json()})).then((e=>{const o=e.map((e=>({name:e.display_name,lat:e.lat,lon:e.lon,onSelect:()=>this.tool.drawTownCircle(e)})));this.tool.createDropdown(o,n,t,"city-dropdown__link",!1)})).catch((e=>console.error("Error fetching cities:",e)))}showDrawnCities(e,t){const n=window.drawnCities.map((n=>({name:n.name,lat:n.circle.getLatLng().lat,lon:n.circle.getLatLng().lng,onSelect:()=>{window.map.setView(n.circle.getLatLng(),9),t.value=n.name,e.style.display="none",this.tool.setupRadiusAdjustment(n)}})));this.tool.createDropdown(n,e,t,"city-dropdown__link",!0),document.querySelector(".town-radius__dropdown").classList.add("hidden")}async searchZip(e,t){const n=e.value.trim();if(n.length<3)return t.innerHTML="",void(t.style.display="none");try{const o=await fetch(`https://nominatim.openstreetmap.org/search?postalcode=${n}&countrycodes=us&format=json&addressdetails=1`),a=(await o.json()).map((t=>({name:t.display_name,onSelect:()=>{e.value=t.display_name}})));this.tool.createDropdown(a,t,e,!1,"zip-dropdown__link")}catch(e){console.error("Error fetching location data:",e),t.style.display="none"}}hideDropdownOnClick(e,t){document.addEventListener("click",(n=>{e.contains(n.target)||n.target===t||n.target.classList.contains("search-input__arrow")||(e.style.display="none")}))}disableTools(){map&&map.dragging&&(document.querySelectorAll(".tool-wrapper").forEach((e=>{e.classList.remove("active")})),map.dragging.enable(),map.boxZoom.disable(),map.doubleClickZoom.enable())}updateButtonState(){const e=document.querySelector(".main-button.submit-selection"),t=Object.keys(window.drawnItems._layers).length,n=Object.keys(window.nonEditableItems._layers).length;t>0||n>0?e.classList.add("active"):e.classList.remove("active")}toggleModal(){const e=document.querySelector(".overlay.homepage"),t=document.querySelector(".selected-area__modal");"block"===e.style.display&&"block"===t.style.display?(e.style.opacity="0",t.style.opacity="0",setTimeout((()=>{e.style.display="none",t.style.display="none"}),300)):(e.style.display="block",t.style.display="block",setTimeout((()=>{e.style.opacity="1",t.style.opacity="1"}),10))}}class n{constructor(){this.displayedCities=new Set,this.pendingRequests=0,this.map=new t}processLayer(e){let t;if(e instanceof L.Polygon||e instanceof L.Rectangle){const n=e.getLatLngs()[0],o=`${Math.min(...n.map((e=>e.lat)))},${Math.min(...n.map((e=>e.lng)))},${Math.max(...n.map((e=>e.lat)))},${Math.max(...n.map((e=>e.lng)))}`;t=`\n                [out:json];\n                (\n                    node["place"~"city|town"](${o});\n                    way["place"~"city|town"](${o});\n                    relation["place"~"city|town"](${o});\n                );\n                out body;`}else if(e instanceof L.Circle){const n=e.getLatLng(),o=e.getRadius();t=`\n                [out:json];\n                (\n                    node["place"~"city|town"](around:${o}, ${n.lat}, ${n.lng});\n                    way["place"~"city|town"](around:${o}, ${n.lat}, ${n.lng});\n                    relation["place"~"city|town"](around:${o}, ${n.lat}, ${n.lng});\n                );\n                out body;`}else{if(!(e instanceof L.GeoJSON))return void console.warn("Unsupported layer type. Only polygon, rectangle, circle, and geoJSON are supported.");{const n=e.getBounds(),o=`${n.getSouth()},${n.getWest()},${n.getNorth()},${n.getEast()}`;t=`\n                [out:json];\n                (\n                    node["place"~"city|town"](${o});\n                    way["place"~"city|town"](${o});\n                    relation["place"~"city|town"](${o});\n                );\n                out body;`}}this.pendingRequests++,this.sendOverpassQuery(t)}sendOverpassQuery(e){fetch("https://overpass-api.de/api/interpreter",{method:"POST",body:e}).then((e=>e.json())).then((e=>{const t=e.elements.filter((e=>e.tags&&e.tags.name)),n=document.querySelector(".selected-cities__wrapper");console.log(t),n&&t.length>0?t.forEach((e=>{const t=e.tags.name;if(!this.displayedCities.has(t)){this.displayedCities.add(t);const e=document.createElement("div");e.classList.add("selected-city");const o=document.createElement("div");o.classList.add("selected-city__text"),o.textContent=t;const a=document.createElement("input");a.type="checkbox",a.classList.add("selected-city__checkbox"),a.checked=!0,e.appendChild(o),e.appendChild(a),n.appendChild(e)}})):console.log("No cities found in this area.")})).catch((e=>{console.error("Error querying Overpass API:",e)})).finally((()=>{this.pendingRequests--,0===this.pendingRequests&&(document.querySelector(".blue-loader").classList.add("hidden"),this.map.toggleModal())}))}fetchPlacesFromAllShapes(e){document.querySelector(".blue-loader").classList.remove("hidden"),document.querySelector(".selected-cities__wrapper").innerHTML="",this.pendingRequests=0,this.displayedCities=new Set,window.drawnItems.eachLayer(this.processLayer.bind(this)),window.nonEditableItems.eachLayer(this.processLayer.bind(this))}}const o=new class{authenticate(e="/",t="/login"){const n=localStorage.getItem("authToken");n?fetch("https://xrux-avyn-v7a8.n7d.xano.io/api:7eX5OyVa/auth/me",{method:"GET",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}}).then((e=>e.json())).then((n=>{if("ERROR_CODE_UNAUTHORIZED"===n.code)localStorage.removeItem("authToken"),window.location.pathname!==t&&(window.location.href=t);else{if("/clients"===window.location.pathname)return;window.location.pathname!==e&&(window.location.href=e)}})).catch((e=>{console.error("Error:",e)})):window.location.pathname!==t&&(window.location.href=t)}logIn(e){fetch("https://xrux-avyn-v7a8.n7d.xano.io/api:7eX5OyVa/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>e.json())).then((e=>{if(e.authToken)localStorage.setItem("authToken",e.authToken),0===e.clients_length?window.location.href="/clients":window.location.href="/";else{const e=document.querySelector(".error-message"),t=document.querySelectorAll(".login-input");e.classList.remove("hidden"),t.forEach((e=>{e.classList.add("invalid")}))}})).catch((e=>{console.error("Error:",e)}))}logOut(){localStorage.removeItem("authToken"),window.location.href="/login"}toggleUserPassVisibility(e,t,n){"password"===e.type?(e.type="text",t.style.display="block",n.style.display="none"):(e.type="password",t.style.display="none",n.style.display="block")}},a=new t,i=new n,s=new class{constructor(){this.authToken=localStorage.getItem("authToken"),this.colorRandomizer=this.colorRandomizer.bind(this),this.map=new t,this.place=new n}loadClients(e,t,n,o,a){const i=document.querySelector("#clients-table tbody"),s=document.querySelector(".clients-table__range");i.style.opacity="40%",document.querySelectorAll(".pagination-arrow").forEach((e=>{e.classList.add("disabled")}));let l=`https://xrux-avyn-v7a8.n7d.xano.io/api:4o1s7k_j/clients?page=${t}&per_page=${n}&offset=${o}`;a&&(l+=`&search=${encodeURIComponent(a)}`),fetch(l,{method:"GET",headers:{Authorization:`Bearer ${this.authToken}`,"Content-Type":"application/json"}}).then((e=>{if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return e.json()})).then((o=>{e&&(0===o.clients.itemsTotal&&document.querySelector(".add-new-client").click(),document.querySelectorAll(".clients-number").forEach((e=>{e.textContent=o.clients.itemsTotal})),document.querySelector(".clients-table__loader").remove()),null===o.clients.nextPage?document.querySelector(".pagination-arrow.right").classList.add("disabled"):document.querySelector(".pagination-arrow.right").classList.remove("disabled"),null===o.clients.prevPage?document.querySelector(".pagination-arrow.left").classList.add("disabled"):document.querySelector(".pagination-arrow.left").classList.remove("disabled");let a="";0===o.clients.items.length?a='\n            <tr>\n              <td colspan="8" class="no-data-message">No data</td>\n            </tr>':o.clients.items.forEach((e=>{console.log(e),a+=`\n              <tr>\n                <td class="dark"><a href="/client?client_id=${e.id}" class="client-table__link">${e.image?`<img class="client-image" src="${e.image.url}" alt="Client image">`:`<div style="background-color: ${this.colorRandomizer()};" class="fullname-capital">${e.full_name.slice(0,1).toUpperCase()}</div>`}${e.full_name}</a></td>\n                <td class="light">${e.company_name}</td>\n                <td><a href="${e.website}" target="_blank" class="website-link">${e.website}</a></td>\n                <td><a href="mailto:${e.email}" class="email-link">${e.email}</a></td>\n                <td class="light">${e.phone_number}</td>\n                <td class="light">${new Date(e.created_at).toLocaleDateString()}</td>\n                <td><img class="edit-client__btn" src="https://cdn.prod.website-files.com/66eab8d4420be36698ed221a/6706654e169e0a1ab9a12e73_pencil-icon.svg"></td>\n              </tr>`})),i.innerHTML=a,i.style.opacity="100%",document.querySelector(".clients-section").style.opacity="1";const l=(t-1)*n+1,d=Math.min(l+o.clients.items.length-1,o.clients.itemsTotal);s.textContent=`${l}-${d}`})).catch((e=>{console.error("Error fetching clients:",e)}))}searchNavClients(e,t){e.forEach((e=>{const n=e.querySelector(".client-link__info").innerText.toLowerCase();""===t||n.includes(t)?e.style.display="flex":e.style.display="none"}))}colorRandomizer(){let e=["#CBE4F9","#CDF5F6","#EFF9DA","#F9EBDF","#F9D8D6","#D6CDEA"];return e[Math.floor(Math.random()*e.length)]}loadClientHomepage(e,t){this.authToken?fetch(t,{method:"GET",headers:{Authorization:`Bearer ${this.authToken}`}}).then((e=>e.json())).then((t=>{const n=document.querySelector(".nav-clients.no-clients"),o=document.querySelector(".nav-clients.existing");if(null===t.geojson_map&&Array.isArray(t.homepage_clients)&&0===t.homepage_clients.length)n.style.display="flex",o.style.display="none";else{n.style.display="none",o.style.display="flex";const a=e?t.homepage_clients.find((t=>t.id===parseInt(e))):t.homepage_clients[0];this.map.drawMap(JSON.parse(a.geojson_map.map),this.place);const i=document.querySelector(".client-nav__name"),s=document.querySelector(".client-nav__image");document.querySelector(".clients-number").textContent=t.homepage_clients.length;const l=document.querySelector(".client-link.active .client-nav__image"),d=document.querySelector(".client-link.active .client-link__info"),c=document.querySelector(".client-link.active .client-link__company");i.textContent=a.full_name,s.src=a.image.url,l.src=a.image.url,d.innerHTML=`${a.full_name}<br>`,c.textContent=a.company_name,o.classList.remove("hidden");const r=document.querySelector(".clients-wrapper");r.innerHTML="",t.homepage_clients.forEach((n=>{if(e&&n.id==e||!e&&n.id==t.homepage_clients[0].id)return;const o=document.createElement("a");o.classList.add("client-link","not-selected"),o.setAttribute("client-id",n.id),o.href="?client-id="+n.id,o.innerHTML=`\n      ${n.image?`<img src="${n.image.url}" loading="lazy" alt="" class="client-nav__image">`:`<div class="client-avatar" style="background-color: ${n.colorRandomizer()} ;">${n.full_name.charAt(0).toUpperCase()}</div>`}\n      <p class="client-link__info">\n        ${n.full_name}<br>\n        <span class="client-link__company inactive">${n.company_name}</span>\n      </p>\n    `,r.appendChild(o)}))}})).catch((e=>{console.error("Error fetching data:",e)})):console.error("authToken not found in local storage")}modalNextStep(e){document.querySelectorAll(".modal-dropdown").forEach((e=>{e.querySelector(".modal-dropdown__text").classList.remove("active"),e.querySelector(".modal-dropdown__arrow").classList.remove("active")}));const t=document.querySelector(".modal-dropdown.factors");t&&(t.querySelector(".modal-dropdown__text").classList.add("active"),t.querySelector(".modal-dropdown__arrow").classList.add("active")),2===e&&(document.querySelector(".new-client__modal").scrollTop=0)}gatherClientData(e){e.full_name=document.getElementById("full-name").value,e.company_name=document.getElementById("company").value,e.email=document.getElementById("email").value,e.website=document.getElementById("website").value,e.phone_number=document.getElementById("phone-number").value,e.company_office_adr=Array.from(document.querySelectorAll(".company-office-address")).map((e=>e.value)).filter(Boolean)}addNewClient(e){const t=localStorage.getItem("authToken"),n={full_name:e.full_name,company_name:e.company_name,email:e.email,website:e.website,phone_number:e.phone_number,population_factor:parseFloat(document.getElementById("population").value)||0,avg_household_income_factor:parseFloat(document.getElementById("avg-income").value)||0,single_family_homes_factor:parseFloat(document.getElementById("num-homes").value)||0,avg_home_value_factor:parseFloat(document.getElementById("avg-home-value").value)||0,distance_from_hq_factor:parseFloat(document.getElementById("distance-hq").value)||0,client_img:e.client_img||null};fetch("https://xrux-avyn-v7a8.n7d.xano.io/api:4o1s7k_j/clients",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify(n)}).then((e=>e.json())).then((e=>{location.reload()})).catch((e=>{console.error("Error adding client:",e)}))}updateModalContent(e){document.querySelector(".modal-form__wrapper.first-step").classList.add("hidden"),document.querySelector(".modal-form__wrapper.second-step").classList.remove("hidden"),e.target.classList.remove("second-step","active"),e.target.classList.add("add-client"),e.target.textContent="Add new Client"}validateForm(e,t){const n=Array.from(e.querySelectorAll(".form-input[required]")).every((e=>e.value&&("email"!==e.type||this.validateEmail(e.value))));t.classList.toggle("active",n)}validateEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}addNewAddressField(e,t){e++;const n=t.querySelectorAll(".form-input__wrapper"),o=n[n.length-1].cloneNode(!0),a=o.querySelector("input");a.value="",a.placeholder=`Company Office Address ${e}`,a.id=`field-address-${e}`,a.name=`address-${e}`,a.removeAttribute("required");const i=o.querySelector(".red-star");return i&&i.remove(),t.appendChild(o),e}validateSecondStepInput(){const e=[document.getElementById("population"),document.getElementById("avg-income"),document.getElementById("num-homes"),document.getElementById("avg-home-value"),document.getElementById("distance-hq")].every((e=>{const t=parseFloat(e.value);return!isNaN(t)&&t>=0&&t<=1}));document.querySelector(".add-client").classList.toggle("active",e)}uploadClientImage(e,t,n){if(t.innerHTML="",e.length>0&&(e[0].type.startsWith("image/")||"image/svg+xml"===e[0].type)){const o=new FileReader;o.onloadend=()=>{n.client_img=o.result;const e=document.createElement("img");e.src=n.client_img,t.appendChild(e)},o.readAsDataURL(e[0])}}},l=new e,d=document.querySelector(".logout-btn"),c=document.getElementById("town-input"),r=document.getElementById("town-dropdown"),m=document.querySelector(".close-town__dropdown"),u=document.querySelector(".search-input__arrow"),p=document.getElementById("state-input"),h=document.getElementById("state-dropdown"),y=document.getElementById("zip-input"),w=document.getElementById("zip-dropdown"),g=new URLSearchParams(window.location.search).get("client-id"),f=document.querySelector(".main-button.submit-selection"),v=document.querySelectorAll(".tool-wrapper .map-manipulation__icon");window.drawnCities=[],o.authenticate(),d.addEventListener("click",(function(e){e.preventDefault(),o.logOut()})),v.forEach((function(e){e.addEventListener("click",(function(){document.querySelectorAll(".tool-wrapper").forEach((function(e){e.classList.remove("active")})),this.closest(".tool-wrapper").classList.add("active")}))})),c.addEventListener("focus",(()=>{a.disableTools(),document.querySelector(".town-radius__dropdown").classList.add("hidden")})),c.addEventListener("input",l.debounce((e=>{const t=e.target.value;if(""===t)return r.innerHTML="",void(r.style.display="none");a.fetchCitySuggestions(t,c,r)}),300)),u.addEventListener("click",(()=>{a.showDrawnCities(r,c)})),a.hideDropdownOnClick(r,c),m&&m.addEventListener("click",(function(){document.querySelector(".town-radius__dropdown").classList.add("hidden")})),p.addEventListener("focus",(()=>{a.disableTools(),document.querySelector(".town-radius__dropdown").classList.add("hidden")})),p.addEventListener("input",(e=>{const t=e.target.value;if(""===t)return void(dropdown.innerHTML="");const n=function(e){return statesData.features.filter((t=>t.properties.name.toLowerCase().includes(e.toLowerCase())))}(t),o=n.map((e=>({name:e.properties.name,onSelect:()=>l.drawState(e,a)})));l.createDropdown(o,h,p,!1,"state-dropdown__link"),a.disableTools()})),y.addEventListener("focus",(()=>{a.disableTools(),document.querySelector(".town-radius__dropdown").classList.add("hidden")})),y.addEventListener("input",l.debounce((async function(){await a.searchZip(y,w)}),300)),f.addEventListener("click",(e=>{i.fetchPlacesFromAllShapes(e)})),document.querySelector(".close-modal").addEventListener("click",(()=>{a.toggleModal()})),document.querySelector(".overlay.homepage").addEventListener("click",(()=>{a.toggleModal()})),document.getElementById("Search").addEventListener("input",(function(e){const t=this.value.toLowerCase().trim(),n=document.querySelectorAll(".client-link");s.searchNavClients(n,t)})),s.loadClientHomepage(g,"https://xrux-avyn-v7a8.n7d.xano.io/api:4o1s7k_j/clients_homepage");const _=document.querySelector(".clients-dropdown"),E=document.querySelector(".close-clients");function b(e){e.stopPropagation(),document.querySelector(".clients-dropdown__menu").classList.toggle("open")}return _.addEventListener("click",(e=>b(e))),E.addEventListener("click",(e=>b(e))),document.querySelectorAll(".option_button").forEach((e=>{e.addEventListener("click",(e=>{const t=document.querySelector(".option_button.active");t&&t.classList.remove("active"),e.currentTarget.classList.add("active")}))})),{}})()));